<template>
    <div class="zhiqiong-actions">
        <a
            v-if="hasOverlay"
            title="${_('地图叠层')}"
            class="mhy-map__action-btn zhiqiong-overlay"
            :class="{ 'zhiqiong-active': overlays }"
            @click.prevent.stop="$emit('update:overlays', !overlays)"
            @contextmenu.prevent="$emit('toggleSettings')"
        >
            <svg viewBox="0 0 1024 1024">
                <path
                    d="M581.44768 79.872l298.1888 169.28768c20.00896 11.34592 27.36128 37.376 16.384 58.14272a41.984 41.984 0 0 1-16.384 16.9984L581.44768 493.568a140.12416 140.12416 0 0 1-138.89536 0l-298.1888-169.28768c-20.00896-11.34592-27.36128-37.376-16.384-58.14272a41.984 41.984 0 0 1 16.384-16.9984L442.55232 79.872a140.12416 140.12416 0 0 1 138.89536 0z m296.59136 381.8496l1.59744 0.94208c20.00896 11.8784 27.36128 39.07584 16.384 60.74368a43.19232 43.19232 0 0 1-16.384 17.75616l-298.1888 176.86528a134.92224 134.92224 0 0 1-138.89536 0l-298.1888-176.86528c-20.00896-11.8784-27.36128-39.05536-16.384-60.74368 3.76832-7.49568 9.46176-13.63968 16.384-17.75616l1.59744-0.94208a78.88896 78.88896 0 0 1 80.896 0l215.69536 127.93856a134.92224 134.92224 0 0 0 138.89536 0l215.69536-127.93856a78.88896 78.88896 0 0 1 80.896 0z m0 225.28l1.59744 0.94208c20.00896 11.8784 27.36128 39.07584 16.384 60.74368a43.19232 43.19232 0 0 1-16.384 17.75616l-298.1888 176.86528a134.92224 134.92224 0 0 1-138.89536 0l-298.1888-176.86528c-20.00896-11.8784-27.36128-39.05536-16.384-60.74368 3.76832-7.49568 9.46176-13.63968 16.384-17.75616l1.59744-0.94208a78.88896 78.88896 0 0 1 80.896 0l215.69536 127.93856a134.92224 134.92224 0 0 0 138.89536 0l215.69536-127.93856a78.88896 78.88896 0 0 1 80.896 0z"
                ></path>
            </svg>
        </a>
        <a class="mhy-map__action-btn zhiqiong-pin" title="${_('跟随定位')}">
            <svg viewBox="0 0 1024 1024">
                <path
                    d="M176 478.208l275.328 91.733333c1.28 0.426667 2.261333 1.408 2.688 2.688l91.733333 275.328a4.266667 4.266667 0 0 0 7.978667 0.341334l279.381333-651.861334a4.266667 4.266667 0 0 0-5.589333-5.589333L175.658667 470.186667a4.266667 4.266667 0 0 0 0.341333 7.978666z"
                ></path>
            </svg>
        </a>
        <a class="mhy-map__action-btn zhiqiong-share" title="${_('多屏共享')}">
            <svg viewBox="0 0 1024 1024">
                <path d="M262.4 262.4l115.2 0 0 115.2-115.2 0 0-115.2Z"></path>
                <path d="M262.4 646.4l115.2 0 0 115.2-115.2 0 0-115.2Z"></path>
                <path d="M646.4 262.4l115.2 0 0 115.2-115.2 0 0-115.2Z"></path>
                <path
                    d="M806.4 806.4l-115.2 0 0 57.6 115.2 0c32 0 57.6-25.6 57.6-57.6l0-57.6-57.6 0L806.4 806.4z"
                ></path>
                <path
                    d="M160 217.6l0 262.4 320 0 0-320L217.6 160C185.6 160 160 185.6 160 217.6zM422.4 422.4 217.6 422.4 217.6 217.6l204.8 0L422.4 422.4z"
                ></path>
                <path
                    d="M160 806.4c0 32 25.6 57.6 57.6 57.6l262.4 0 0-320-320 0L160 806.4zM217.6 601.6l204.8 0 0 204.8L217.6 806.4 217.6 601.6z"
                ></path>
                <path d="M544 544l204.8 0 0 57.6-204.8 0 0-57.6Z"></path>
                <path
                    d="M691.2 627.2 627.2 627.2 627.2 691.2 691.2 691.2 691.2 748.8 748.8 748.8 748.8 691.2 864 691.2 864 627.2 748.8 627.2Z"
                ></path>
                <path d="M544 748.8l57.6 0 0 115.2-57.6 0 0-115.2Z"></path>
                <path d="M627.2 748.8l57.6 0 0 57.6-57.6 0 0-57.6Z"></path>
                <path d="M544 627.2l57.6 0 0 57.6-57.6 0 0-57.6Z"></path>
                <path d="M806.4 544l57.6 0 0 57.6-57.6 0 0-57.6Z"></path>
                <path
                    d="M806.4 160 544 160l0 320 320 0L864 217.6C864 185.6 838.4 160 806.4 160zM806.4 422.4 601.6 422.4 601.6 217.6l204.8 0L806.4 422.4z"
                ></path>
            </svg>
            <div class="zhiqiong-share-dot">0</div>
        </a>
        <a class="mhy-map__action-btn zhiqiong-more" title="${_('连接插件')}">
            <svg viewBox="0 0 204 204" class="v-icon cocogoat">
                <g>
                    <path
                        d=" M 92.79 59.13 C 94.98 55.32 98.53 52.56 101.92 49.88 C 105.14 52.74 108.92 55.30 111.02 59.15 C 110.63 62.49 107.80 65.92 104.21 65.83 C 101.15 65.86 97.27 66.68 95.10 63.91 C 93.97 62.56 92.73 60.98 92.79 59.13 Z"
                    ></path>
                    <path
                        d=" M 82.38 54.26 C 82.72 54.23 83.41 54.17 83.76 54.14 C 86.77 57.18 89.10 60.84 92.29 63.72 C 93.95 65.58 96.89 67.68 95.57 70.52 C 93.68 75.27 90.04 79.03 87.26 83.27 C 85.94 84.91 84.25 87.99 81.72 86.52 C 79.39 83.07 77.68 79.20 75.02 75.95 C 73.64 73.84 70.87 71.42 72.69 68.75 C 75.49 63.69 78.35 58.47 82.38 54.26 Z"
                    ></path>
                    <path
                        d=" M 119.11 54.95 C 120.87 52.96 122.79 55.72 123.89 57.04 C 126.97 61.41 130.22 65.85 132.00 70.92 C 128.93 76.45 124.76 81.37 121.83 87.03 C 121.20 86.96 119.95 86.83 119.33 86.77 C 116.16 82.55 113.06 78.28 110.00 73.99 C 108.50 71.78 106.78 68.39 109.16 66.15 C 112.65 62.58 116.01 58.89 119.11 54.95 Z"
                    ></path>
                    <path
                        d=" M 51.82 63.56 C 58.70 63.02 64.12 67.97 68.08 72.99 C 72.28 77.62 75.21 83.19 78.32 88.57 C 80.70 92.48 79.50 97.42 81.68 101.44 C 84.44 88.13 95.06 78.87 101.41 67.39 C 103.21 69.06 104.59 71.10 105.93 73.15 C 111.83 81.55 119.56 89.46 121.42 99.94 C 121.88 99.79 122.79 99.50 123.25 99.35 C 123.62 95.93 123.59 92.31 125.30 89.22 C 129.75 80.82 134.83 72.41 142.47 66.52 C 145.21 64.40 148.62 63.50 152.06 63.57 C 150.18 68.18 148.61 72.98 148.91 78.04 C 148.87 91.80 143.22 105.66 132.73 114.74 C 129.22 118.10 124.49 120.51 122.54 125.21 C 127.83 124.55 132.04 121.10 136.38 118.32 C 145.39 112.57 154.03 106.14 161.79 98.78 C 167.77 93.07 171.20 85.51 174.16 77.96 C 176.45 77.74 177.07 80.44 178.09 81.97 C 181.72 88.26 181.50 95.83 180.67 102.81 C 179.03 109.41 175.27 115.68 169.55 119.51 C 161.87 124.32 153.00 127.10 143.98 127.83 C 140.96 128.00 137.94 128.52 135.19 129.85 C 136.01 134.37 136.26 139.44 133.24 143.26 C 129.03 150.23 118.48 151.96 112.25 146.74 C 108.03 143.08 106.71 137.40 103.80 132.82 C 102.28 133.14 100.11 132.48 99.28 134.22 C 96.79 138.38 95.66 143.53 91.73 146.71 C 87.38 150.49 80.82 150.55 75.80 148.14 C 72.69 146.31 70.33 143.26 68.96 139.95 C 67.64 136.66 68.75 133.04 68.04 129.67 C 65.75 128.01 62.69 128.23 60.02 127.83 C 51.21 127.21 42.64 124.39 35.05 119.91 C 28.95 116.19 24.96 109.66 23.29 102.82 C 22.58 95.83 22.21 88.24 25.83 81.92 C 26.84 80.41 27.51 77.79 29.76 77.99 C 31.70 81.87 32.72 86.19 35.15 89.83 C 41.41 100.09 51.57 106.93 61.00 113.98 C 67.60 117.93 73.49 123.71 81.26 125.19 C 79.42 120.47 74.79 118.01 71.24 114.75 C 60.50 105.43 54.82 91.11 55.06 76.99 C 55.35 72.26 53.43 67.89 51.82 63.56 M 72.72 129.22 C 72.52 135.00 78.56 138.93 83.85 138.62 C 87.70 138.20 90.56 135.35 93.11 132.70 C 87.27 128.33 79.61 128.62 72.72 129.22 M 110.90 132.29 C 112.59 134.55 114.51 136.81 117.21 137.86 C 123.13 140.54 131.06 135.91 131.17 129.27 C 124.29 128.39 117.05 128.76 110.90 132.29 Z"
                    ></path>
                </g>
            </svg>
        </a>
    </div>
</template>

<script setup lang="ts">
defineProps<{
    hasOverlay: boolean
    overlays: boolean
}>()
defineEmits(['connect', 'update:overlays', 'toggleSettings'])
</script>

<style lang="scss">
.zhiqiong-actions {
    position: fixed;
    bottom: 20px;
    left: 20px;
    z-index: 999;
    margin-bottom: -10px;
    .mhy-map__action-btn {
        width: 40px;
        height: 40px;
        margin-bottom: 0;
        z-index: 99999;
        background-color: rgba(50, 57, 71, 0.8);
        border-radius: 8px;
        cursor: pointer;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        justify-content: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
        margin-top: 10px;
    }

    svg {
        width: 80%;
        fill: #ece5d8;
    }

    .zhiqiong-pin {
        display: none;
    }

    .zhiqiong-share {
        display: none;
        position: relative;
    }

    .zhiqiong-overlay svg {
        width: 55%;
    }

    &.zhiqiong-activated .zhiqiong-pin {
        display: flex;
    }

    &.zhiqiong-activated .zhiqiong-more {
        display: none;
    }

    &.zhiqiong-activated .zhiqiong-share {
        display: flex;
    }

    .zhiqiong-share-dot {
        display: none;
        position: absolute;
        background: #ff9605;
        color: #fff;
        padding: 1px 4px;
        font-size: 12px;
        border-radius: 3px;
        top: -6px;
        right: -6px;
    }
    .zhiqiong-active .zhiqiong-share-dot {
        display: block;
    }

    .zhiqiong-active svg {
        fill: #ffc107;
    }
}
</style>
